{% extends 'base.html.twig' %}


{% block title %}{{ 'show.teams'|trans }}{% endblock %}


{% block body %}
   <div class="container mx-auto my-8">
       <h1 class="text-4xl font-bold text-gray-800 mb-6">{{ 'show.teams'|trans }}</h1>


       <!-- Formulaire de filtre pour sélectionner un championnat -->
       <form method="get" class="mb-6">
           <label for="championship" class="block mb-2 text-lg text-white">Filtrer les championnats:</label>
           <select name="championship" id="championship" class="border border-blue-500 rounded-lg p-2 w-full bg-gray-800 text-white focus:ring-2 focus:ring-blue-400 focus:outline-none">
               <option value="">-- Selectionner un championnat --</option>
               {% for championship in championshipList %}
                   <option value="{{ championship.id }}" {% if selectedChampionship and championship.id == selectedChampionship.id %}selected{% endif %}>
                       {{ championship.ChampionshipName }}
                   </option>
               {% endfor %}
           </select>
           <button type="submit" class="mt-4 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-700 transform hover:scale-105 transition-all duration-300">Filter</button>
       </form>


       {% if teams is not empty %}
           <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start">
               {% for team in teams %}
                   <div class="bg-gray-800 shadow-lg rounded-xl overflow-hidden p-6 space-y-4 cursor-pointer transform hover:scale-105 transition-all duration-300" onclick="toggleTeamMembers('team-{{ team.id }}')">
                       <h2 class="text-2xl font-semibold text-white">
                           Team: {{ team.Name }}
                       </h2>
                       <div id="team-{{ team.id }}" class="hidden space-y-4 mt-4 transition-all duration-700 ease-in-out">
                           {% for member in team.TeamMembers %}
                               <div class="p-4 border border-gray-600 rounded-lg bg-gray-700 flex justify-between items-center">
                                   <div>
                                       <p class="text-white font-medium">{{ member.Name }}</p>
                                       <p class="text-gray-400 text-sm">{{ member.Email }}</p>
                                   </div>
                               </div>
                           {% endfor %}
                       </div>
                       {% if app.user and team.creator.id == app.user.id %}
                           <p class="text-sm text-gray-400 italic">Vous êtes le créateur de cette équipe.</p>
                       {% endif %}
                   </div>
               {% endfor %}
           </div>
       {% else %}
           <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
               <p class="font-bold"> {{ 'show.noTeams'|trans }}</p>
               <p> {{ 'show.noTeamJoined'|trans }}</p>
           </div>
       {% endif %}
   </div>


   <script>
       function toggleTeamMembers(teamId) {
           const teamElement = document.getElementById(teamId);
           teamElement.classList.toggle('hidden');
       }
   </script>
{% endblock %}
