{% extends 'base.html.twig' %}

{% block title %}Teams{% endblock %}

{% block body %}
    <div class="container mx-auto my-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-6">Teams</h1>

        <!-- Formulaire de filtre pour sÃ©lectionner un championnat -->
        <form method="get" class="mb-6">
            <label for="championship" class="block mb-2 text-lg">Filter by Championship:</label>
            <select name="championship" id="championship" class="border rounded-lg p-2 w-full">
                <option value="">-- Select a Championship --</option>
                {% for championship in championshipList %}
                    <option value="{{ championship.id }}" {% if selectedChampionship and championship.id == selectedChampionship.id %}selected{% endif %}>
                        {{ championship.ChampionshipName }}
                    </option>
                {% endfor %}
            </select>
            <button type="submit" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded">Filter</button>
        </form>

        {% if teams is not empty %}
            {% for team in teams %}
                <div class="mb-8 bg-white shadow-md rounded-lg overflow-hidden">
                    <div class="px-6 py-4">
                        <h2 class="text-2xl font-semibold text-gray-700">
                            Team: {{ team.Name }}
                        </h2>
                    </div>
                    <table class="table-auto w-full text-left border-collapse border border-gray-300">
                        <thead class="bg-gray-200">
                            <tr>
                                <th class="px-4 py-2 border border-gray-300">Name</th>
                                <th class="px-4 py-2 border border-gray-300">E-mail</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for member in team.TeamMembers %}
                                <tr class="hover:bg-gray-100">
                                    <td class="px-4 py-2 border border-gray-300">{{ member.Name }}</td>
                                    <td class="px-4 py-2 border border-gray-300">{{ member.Email }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <div class="px-6 py-4">
                        {% if app.user and team.creator.id == app.user.id %}
                            <p class="text-sm text-gray-500 italic">You are the creator of this team.</p>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
                <p class="font-bold">No Teams Available</p>
                <p>It seems you haven't created or joined any teams yet.</p>
            </div>
        {% endif %}
    </div>
{% endblock %}
