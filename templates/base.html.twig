<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block title %}Score!{% endblock %}
    </title>
    <link rel="icon" href="{{ asset('Images/logo.png') }}">
    {% block stylesheets %}
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    {% endblock %}
    <style>
        .dropdown-content {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .dropdown-content.active {
            opacity: 1;
            transform: translateY(0);
        }
        .nav-link {
            transition: all 0.3s ease-in-out;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover {
            border-bottom: 2px solid white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white">

    {% set route = app.request.attributes.get('_route') %}
    {% set route_params = app.request.attributes.get('_route_params') %}
    {% set params = route_params|merge(app.request.query.all) %}

    {% for message in app.flashes('notice') %}
        <div class="flash-notice text-center py-2 text-green-400">
            {{ message }}
        </div>
    {% endfor %}

    <div class="min-h-screen flex flex-col">
        <!-- Navbar de Luxe -->
        <nav class="bg-gradient-to-r from-black to-gray-900 flex items-center justify-between px-8 py-6 shadow-xl rounded-b-3xl border-b border-gray-700">
            <div class="flex items-center space-x-4">
                <img class="w-14 h-14 rounded-full border-2 border-white" src="{{ asset('Images/logo.png') }}" alt="Logo">
                <p class="text-3xl font-extrabold tracking-wide text-white">RobotLeague</p>
            </div>

            <!-- Menu Burger -->
            <div class="sm:block md:hidden">
                <label for="menu-toggle" class="cursor-pointer">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </label>
                <input type="checkbox" id="menu-toggle" class="hidden" />
            </div>

            <!-- Menu Principal -->
            <div class="hidden md:flex space-x-8 text-lg">
                <a href="{{ path('app_home') }}" class="nav-link font-medium">{{ 'base.home'|trans }}</a>
                <div class="relative">
                    <button class="nav-link font-medium">{{ 'base.teams'|trans }}</button>
                    <div class="dropdown-content absolute hidden bg-gray-800 text-white shadow-lg rounded-lg mt-2 p-4">
                        {% if app.user %}
                            {% if is_granted('ROLE_USER') %}
                                <a href="{{ path('app_team_new') }}" class="block py-2 hover:text-gray-400">{{ 'base.create'|trans }}</a>
                                <a href="{{ path('app_choose_championship_member') }}" class="block py-2 hover:text-gray-400">{{ 'show.member'|trans }}</a>
                            {% endif %}
                        {% endif %}
                        <a href="{{ path('app_team_show') }}" class="block py-2 hover:text-gray-400">{{ 'base.seeTeams'|trans }}</a>
                        <a href="{{ path('app_score_table') }}" class="block py-2 hover:text-gray-400">{{ 'base.seeScores'|trans }}</a>
                    </div>
                </div>
                {% if is_granted('ROLE_ORGANISATEUR') %}
                    <div class="relative">
                        <button class="nav-link font-medium">{{ 'base.admin'|trans }}</button>
                        <div class="dropdown-content absolute hidden bg-gray-800 text-white shadow-lg rounded-lg mt-2 p-4">
                            <a href="{{ path('app_user_index') }}" class="block py-2 hover:text-gray-400">{{ 'base.users'|trans }}</a>
                            <a href="{{ path('app_championship_index') }}" class="block py-2 hover:text-gray-400">{{ 'base.championship'|trans }}</a>
                            <a href="{{ path('app_championship_list_new') }}" class="block py-2 hover:text-gray-400">{{ 'base.createAChampionship'|trans }}</a>

                        </div>
                    </div>
                {% endif %}
                {% if app.user %}
                    <a href="{{ path('app_logout') }}" class="nav-link font-medium">{{ 'base.logout'|trans }}</a>
                {% else %}
                    <a href="{{ path('app_login') }}" class="nav-link font-medium">{{ 'base.login'|trans }}</a>
                    <a href="{{ path('app_register') }}" class="nav-link font-medium">{{ 'base.register'|trans }}</a>
                {% endif %}
            </div>
        </nav>

        {% block body %}
        {% endblock %}
    </div>

    <a href="{{ path(route, params|merge({ _locale: 'en' })) }}">English</a>
    <a href="{{ path(route, params|merge({ _locale: 'fr' })) }}">Fran√ßais</a>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const menuToggle = document.getElementById('menu-toggle');
            const navMenu = document.querySelector('.md\\:flex');

            menuToggle.addEventListener('change', function () {
                if (menuToggle.checked) {
                    navMenu.classList.remove('hidden');
                    navMenu.classList.add('flex', 'flex-col', 'items-center', 'space-y-4');
                } else {
                    navMenu.classList.add('hidden');
                    navMenu.classList.remove('flex');
                }
            });

            const menuButtons = document.querySelectorAll('.relative button');
            menuButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const dropdown = this.nextElementSibling;
                    dropdown.classList.toggle('active');
                    dropdown.classList.toggle('hidden');
                });
            });
        });
    </script>
</body>
</html>
