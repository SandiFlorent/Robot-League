{% extends 'base.html.twig' %}

{% block body %}
<div class="container mx-auto p-6">
    <!-- Titre de la page -->
    <h1 class="text-5xl font-bold text-center text-white mt-12 mb-8">{{ 'index.userIndex'|trans }}</h1>

    <!-- Table Responsive -->
    <div class="overflow-x-auto shadow-lg rounded-lg border border-blue-700">
        <table class="min-w-full bg-gray-900 border border-gray-700 text-white">
            <thead class="bg-blue-900 text-blue-300">
                <tr>
                    <th class="px-6 py-4 text-left text-sm font-medium">{{ 'show.id'|trans }}</th>
                    <th class="px-6 py-4 text-left text-sm font-medium">{{ 'show.email'|trans }}</th>
                    <th class="px-6 py-4 text-left text-sm font-medium">{{ 'show.roles'|trans }}</th>
                    <th class="px-6 py-4 text-left text-sm font-medium">{{ 'index.actions'|trans }}</th>
                </tr>
            </thead>
            <tbody>
            {% for user in users %}
                <tr class="odd:bg-gray-800 even:bg-gray-700 hover:bg-gray-600">
                    <td class="px-6 py-4 text-sm">{{ user.id }}</td>
                    <td class="px-6 py-4 text-sm">{{ user.email }}</td>
                    <td class="px-6 py-4 text-sm">
                        {{ user.roles ? user.roles|json_encode : 'Aucun rôle' }}
                    </td>
                    <td class="px-6 py-4 text-sm flex space-x-4">
                        <a href="{{ path('app_user_edit', {'id': user.id}) }}" 
                           class="text-green-400 hover:text-green-300">Modifier</a>
                        <form action="{{ path('app_impersonate_user', {'id': user.id}) }}" method="post">
                            <button type="submit" class="text-red-400 hover:text-red-300">Se faire passer pour</button>
                        </form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="px-6 py-4 text-center text-gray-400">
                        {{ 'index.noRecords'|trans }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Lien de création d'utilisateur -->
    <div class="mt-8 text-center">
        <a href="{{ path('app_user_new') }}" 
           class="px-6 py-3 bg-blue-700 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 transform hover:scale-105 transition duration-300">
             {{ 'nex.createNewUser'|trans }}
        </a>
    </div>
</div>
{% endblock %}
