{# templates/championship/elimination.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Phase d'élimination{% endblock %}

{% block body %}
    <h1>Phase d'élimination</h1>

    {# Affichage des matchs pour chaque round #}
    {% for round, matches in matches_by_round %}
        <h2>Round {{ round }}</h2>
        
        <ul>
            {% for match in matches %}
                <li>
                    {{ match.blueTeam.name }} vs {{ match.greenTeam.name }} - 
                    {{ match.state.value }}
                </li>
            {% endfor %}
        </ul>
    {% endfor %}

    {# Vérification si tous les matchs du tournoi sont terminés #}
    {% set allMatchesFinished = true %}
    {% for round, matches in matches_by_round %}
        {% for match in matches %}
            {% if match.state.value != 'winBlue' and match.state.value != 'winGreen' %}
                {% set allMatchesFinished = false %}
            {% endif %}
        {% endfor %}
    {% endfor %}

    {# Affichage du bouton si tous les matchs sont terminés #}
    {% if allMatchesFinished %}
        <a href="{{ path('app_championship_next_round', {'id': championship_list.id}) }}" class="btn btn-primary">
            Actualiser
        </a>
    {% endif %}
{% endblock %}
